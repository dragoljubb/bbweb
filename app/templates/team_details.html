{% extends "layout.html" %}

{% block content %}

<!-- Top header panel -->

<div class="team-header d-flex align-items-center mb-4">

  <div class="team-details-info">{{team.club_info}}  </div>


  <!-- Watermark grb -->
  <img src="{{team_logo(team.club_code) }}"
       alt="{{ team.club_name }}"
       class="team-header-logo">

  <!-- Info desno -->
  <div class="team-header-info ms-auto text-end">
  <div class="team-meta">
    <div class="meta-item"><span class="meta-label">Country:</span> {{ team.country_name }}</div>
    <div class="meta-item"><span class="meta-label">City:</span> {{ team.city }}</div>
    <div class="meta-item"><span class="meta-label">Arena:</span> {{ team.arena_name }}</div>
    <div class="meta-item"><span class="meta-label">President:</span> {{ team.president }}</div>
    <div class="meta-item"><span class="meta-label">Phone:</span> {{ team.phone }}</div>
  </div>
</div>

</div>


 <h2 class="team-name">{{ team.club_name }}</h2>

<ul class="nav nav-tabs mb-3" id="teamTabs" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="roster-tab" data-bs-toggle="tab" data-bs-target="#roster" type="button" role="tab">Roster</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="games-tab" data-bs-toggle="tab" data-bs-target="#games" type="button" role="tab">Games</button>
  </li>
</ul>

<div class="tab-content" id="teamTabsContent">

  <!-- Roster -->
  <div class="tab-pane fade show active" id="roster" role="tabpanel">
    <div class="row">
      {% for player in roster %}
        <div class="col-md-3 mb-3 text-center">
          <img src="{{ player.photo }}" alt="{{ player.name }}" class="img-fluid rounded mb-1" style="height: 100px; object-fit: cover;">
          <p class="mb-0">{{ player.name }}</p>
          <small>{{ player.position }}</small>
        </div>
      {% endfor %}
      {% for coach in coaches %}
        <div class="col-md-3 mb-3 text-center">
          <img src="{{ coach.photo }}" alt="{{ coach.name }}" class="img-fluid rounded mb-1" style="height: 100px; object-fit: cover;">
          <p class="mb-0">{{ coach.name }}</p>
          <small>{{ coach.role }}</small>
        </div>
      {% endfor %}
    </div>
  </div>

  <!-- Games -->
  <div class="tab-pane fade" id="games" role="tabpanel">

    <!-- Seasons filter -->
    <div class="games-filters mb-3">
      <select id="seasonSelectGames" class="form-select w-auto">
        {% for s in seasons %}
          <option value="{{ s.code }}"
            {% if s.code == selected_season %}selected{% endif %}>
            {{ s.label }}
          </option>
        {% endfor %}
      </select>
    </div>

        {% if next_game %}
          <h5 class="mt-3">Next Game</h5>
          <div class="next-game">
            {% set g = next_game %}
            {% include "components/game_card_full.html" %}
          </div>
        {% endif %}

        {% if results %}
        <h5 class="mt-4">Results</h5>
        <div class="results-games">
          {% for g in results %}
            {% include "components/game_card_full.html" %}
          {% endfor %}
        </div>
        {% endif %}

        {% if upcoming %}
        <h5 class="mt-4">Upcoming Games</h5>
        <div class="upcoming-games">
          {% for g in upcoming %}
            {% include "components/game_card_full.html" %}
          {% endfor %}
        </div>
        {% endif %}






  </div>
</div>


<!-- CSS -->
<style>
/* ===============================
   TEAM HEADER
   =============================== */
.team-header {
  position: relative;
  display: flex;
  align-items: center;
  height: 200px;
  padding: 30px 150px;
  background: #f4f5f7; /* svetla, neutralna pozadina */
  border-radius: 10px;
  overflow: hidden;
}

/* Large transparent logo - centered, samo opacity */
.team-header-logo {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%); /* centriranje horizontalno i vertikalno */
  height: 180px;                     /* prilagodjeno */
  width: auto;
  opacity: 0.1;                       /* diskretno */
  pointer-events: none;
  z-index: 1;
}

/* Right aligned info */
.team-header-info {
  margin-left: auto;
  text-align: right;
  z-index: 2;
  max-width: 60%;
}

/* Team name */
.team-name{
  font-size: 1.8rem;
  font-weight: 700;
  letter-spacing: 0.5px;
  margin-bottom: 8px;
  text-align: center;
  padding-top: 5px;

}

/* Meta info text */
.team-header-info p {
  font-size: 0.75rem;
  margin-bottom: 2px;
  color: #555;
  line-height: 1.3;
}

/* Back button */
.team-header .btn {
  position: absolute;
  top: 16px;
  right: 20px;
  z-index: 3;
}

/* ===============================
   TABS
   =============================== */
.nav-tabs .nav-link {
  font-size: 0.85rem;
  padding: 6px 12px;
}

.nav-tabs .nav-link.active {
  font-weight: 600;
}

/* ===============================
   ROSTER
   =============================== */
.tab-pane img {
  height: 90px;
  width: 100%;
  object-fit: cover;
  border-radius: 4px;
}

.tab-pane p {
  font-size: 0.8rem;
  margin-bottom: 2px;
}

.tab-pane small {
  font-size: 0.7rem;
  color: #777;
}

/* ===============================
   GAMES TABLE
   =============================== */
.table th, .table td {
  vertical-align: middle;
  font-size: 0.8rem;
}

/* ===============================
   UTILITIES
   =============================== */
.text-muted-small {
  font-size: 0.75rem;
  color: #666;
}


.team-details-info
{
  font-size: 0.58rem;
  color: #555;
  max-width: 35%;
  padding-top: 25px;
}

.team-meta {
  display: flex;
  flex-direction: column; /* vertikalno */
  gap: 4px;               /* razmak između redova */
  text-align: left;
}

.team-meta .meta-item {
  display: flex;
  align-items: center;
}

.team-meta .meta-label {
  font-weight: 600;       /* bold labela */
  width: 80px;            /* fiksna širina labela za poravnanje */
  margin-right: 8px;      /* razmak između labela i vrednosti */
  text-align: left;      /* labela desno, vrednost levo */
  color: #333;
}

.team-meta .meta-item span {
  /* vrednost */
  color: #555;
}


.games-filters {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.next-game, .results-games, .upcoming-games {
  display: flex;
  flex-direction: column;
  gap: 10px; /* razmak između panela */
}

/* Opcionalno: Next game panel može biti malo naglašen */
.next-game .game-card-full {
  border-color: #3b82f6; /* plava border za isticanje */
  box-shadow: 0 4px 12px rgba(59,130,246,0.2);
}


</style>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  // Sezona dropdown
  const seasonSelect = document.getElementById("seasonSelectGames");
  seasonSelect.addEventListener("change", () => {
    const season = seasonSelect.value;
    const params = new URLSearchParams(window.location.search);
    params.set('season', season);
    window.location.search = params.toString();
  });
});
</script>
{% endblock %}
